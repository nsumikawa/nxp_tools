{% extends 'base.html' %}


{% load static %}


{% load bootstrap3 %}

{% block css %}
<style>
.accordion {
    background-color: #eee;
    color: #444;
    cursor: pointer;
    padding: 18px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
    transition: 0.4s;
}

.active, .accordion:hover {
    background-color: #ccc;
}

.panel {
    padding: 0 18px;
    display: none;
    background-color: white;
    overflow: hidden;
}
.accordion:after {
    content: '\02795'; /* Unicode character for "plus" sign (+) */
    font-size: 13px;
    color: #777;
    float: right;
    margin-left: 5px;
}

.active:after {
    content: "\2796"; /* Unicode character for "minus" sign (-) */
}

.btn-group .button {
    background-color: #008CBA; /* blue */
    border: 1px solid white;
    color: white;
    padding: 5px 22px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    cursor: pointer;
    float: left;
}

.btn-group .button2 {
    background-color: #e7e7e7; /* gray */
    border: 1px solid white;
    color: white;
    padding: 5px 22px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    cursor: pointer;
    float: left;
}

.btn-group .button:not(:last-child) {
    border-right: none; /* Prevent double borders */
}
.btn-group .button:hover {
    background-color: #3e8e41;
}
</style>
{% endblock %}



{% block javascript %}
<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var panel = this.nextElementSibling;
        if (panel.style.display === "block") {
            panel.style.display = "none";
        } else {
            panel.style.display = "block";
        }
    });
}
</script>
{% endblock %}



{% block content %}


  <div class="w3-modal-content w3-card">
    <header class="w3-container w3-dark-gray w3-display-container">
      <h4> Directories : {{dir_name.name}}</h4>

      {% if request.user.is_superuser %}
      <div class="btn-group pull-right">
        {% if page_type == 'DOC' %}
        <form>
          <button class='button' formaction="{% url 'training:add_doc' %}">Add</button>
        </form>
        {% elif page_type == 'FAQ' %}
        <form>
          <button class='button' formaction="{% url 'training:add_faq' %}">Add</button>
        </form>
        {% endif %}
      </div>
      {% endif %}


    </header>
    {% ifnotequal dir_name.description|stringformat:"s" "None" %}
      <div class="w3-container">
        <p> Description : {{dir_name.description}}</p>
      </div>
    {% endifnotequal %}

    <br>

    {% if dir_tree %}
    <table class="table">
      <thead>
      <tr>
        <th scope="col">Directory</th>
        <th scope="col">Description</th>
        <th scope="col">Link</th>
      </tr>
      </thead>
      <tbody>
          {% for dir in dir_tree %}
          <tr>
            <td>{{ dir.name }}</td>
            <td>{{ dir.description }}</td>
            {% if page_type == 'DOC' %}
            <td>
              <form>
                <button class='button' formaction="{% url 'training:training_doc' dir.id %}">View</button>
              </form>
            </td>
            {% elif page_type == 'FAQ' %}
            <td>
              <form>
                <button class='button' formaction="{% url 'training:training_faq' dir.id %}">View</button>
              </form>
            </td>
            {% endif %}

          </tr>
          {% endfor %}

      </tbody>
    </table>
    {% endif %}

    <!-- {% if dir_tree %}
    <div class="w3-modal-content w3-card">
      <header class="w3-container w3-black w3-display-container">
        <h4> Directories : </h4>
      </header>

      {% for dir in dir_tree %}
        <button class="accordion">{{dir.name}}</button>
        <div class="panel">
          <p> Description : {{dir.description}} </p>
          <div class="btn-group pull-right">
            <form>
              <button class='button' formaction="{% url 'training:training_doc' dir.id %}">View</button>
            </form>
          </div>
        </div>
      {% endfor %}

    </div>
    <br>
    {% endif %} -->

    {% if documents %}
      {% if page_type == 'DOC' or page_type == 'BOTH' %}
      <div class="w3-modal-content w3-card">
        <header class="w3-container w3-black w3-display-container">
          <h4> Documents : </h4>
        </header>

          {% for doc in documents %}
            {% ifnotequal doc.name|stringformat:"s" "None" %}
              <button class="accordion">{{doc.name}}</button>
              <div class="panel">
                <p> Description : {{doc.description|linebreaksbr}} </p>

                <div class="btn-group pull-right">
                  {% ifnotequal doc.pptx_href|stringformat:"s" "None" %}
                    <a href={{doc.pptx_href}}><button class='button'> Powerpoint </button></a>
                  {% else %}
                    <button class='button2'> Powerpoint </button>
                  {% endifnotequal %}

                  {% ifnotequal doc.video_href|stringformat:"s" "None" %}
                    <a href={{doc.video_href}}><button class='button'> Video </button></a>
                  {% else %}
                    <button class='button2'> Video </button>
                  {% endifnotequal %}

                  {% if request.user.is_superuser %}
                    <form>
                      <button class='button' formaction="{% url 'training:add_doc' doc.id %}">Edit</button>
                    </form>
                  {% endif %}
                </div>

              </div>
            {% endifnotequal %}
          {% endfor %}
      </div>
      {% endif %}

      {% if page_type == 'FAQ' or page_type == 'BOTH' %}
      <div class="w3-modal-content w3-card">
        <header class="w3-container w3-black w3-display-container">
          <h4> FAQ : </h4>
        </header>

          {% for doc in documents %}
            {% ifnotequal doc.question|stringformat:"s" "None" %}
              <button class="accordion">{{doc.question}}</button>
              <div class="panel">
                <p> Answer : {{ doc.answer|linebreaksbr }} </p>

                {% ifnotequal doc.img_href|stringformat:"s" "None" %}
                  <div><img src={{doc.img_href}}></div>
                {% endifnotequal %}

                <div class="btn-group pull-right">
                  {% ifnotequal doc.pptx_href|stringformat:"s" "None" %}
                    <a href={{doc.pptx_href}}><button class='button'> Powerpoint </button></a>
                  {% else %}
                    <button class='button2'> Powerpoint </button>
                  {% endifnotequal %}
                  {% ifnotequal doc.video_href|stringformat:"s" "None" %}
                    <a href={{doc.video_href}}><button class='button'> Video </button></a>
                  {% else %}
                    <button class='button2'> Video </button>
                  {% endifnotequal %}

                  {% if request.user.is_superuser %}
                    <form>
                      <button class='button' formaction="{% url 'training:add_faq' doc.id %}">Edit</button>
                    </form>
                  {% endif %}
                </div>

              </div>
            {% endifnotequal %}
          {% endfor %}
      </div>
      {% endif %}

    {% endif %}


  </div>

{% endblock %}
